exports.name = '/facebook/info';
const axios = require('axios')
exports.index = async (req, res, next) => {
  const axios = require("axios");
axios.get(`https://graph.facebook.com/${req.query.uid}?fields=id,is_verified,created_time,cover,work,hometown,username,link,name,locale,location,website,birthday,gender,relationship_status,quotes,subscribers.limit(0)&access_token=EAAGNO4a7r2wBAL0qWBsQXfhZBe8fDwXmFL0sELMPdxQ6XCeVxgsl5bwXTCSGfGXS6W7LKmofO6a8tczCO4sCEqjycXXV8TKV2JEiXMqY13qZBgmguZAQLucDZAYTBXDXApH3j3BbvuP3ChxnU5ZB22ThHQioiGzKKV1JeDnEGbNqEJXFrpZBbN`,{
        headers: {
          "cookie":"dpr=1.25; sb=awijY9zZ3IniLrUhDNWn2oIG; datr=awijY_gRMKJBs__pv0k72QKc; c_user=100079715251584; xs=10%3AXqQxgcW1aCl1dA%3A2%3A1671628911%3A-1%3A6279%3A%3AAcW-rU85zD-sn1kGjgCrMfJR3J-L5RPwWtIOcVBTgw; presence=C%7B%22t3%22%3A%5B%5D%2C%22utc3%22%3A1671846291083%2C%22v%22%3A1%7D; wd=1536x696; fr=09oXBocWQWTPLUlY8.AWU9w4UnRJ-ITI7aE9uGQAiEfRI.BjplmM.mr.AAA.0.0.BjploJ.AWWyyHvpioU; useragent=TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEwOC4wLjAuMCBTYWZhcmkvNTM3LjM2; _uafec=Mozilla%2F5.0%20(Windows%20NT%2010.0%3B%20Win64%3B%20x64)%20AppleWebKit%2F537.36%20(KHTML%2C%20like%20Gecko)%20Chrome%2F108.0.0.0%20Safari%2F537.36;",
          "User-Agent": "Mozilla/5.0 (iPhone; CPU iPhone OS 12_0 like) Version/12.0 eWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1",
          "accept": "application/json, text/plain, /"
        }
      }).then(resp => {
  
  var dj = {
    uid: resp.data.id,
    birthday: resp.data.birthday,
    gender: resp.data.gender,
    created_time : resp.data.created_time,
    relationship_status: resp.data.relationship_status,
    quotes: resp.data.quotes,
    follower: resp.data.subscribers.summary.total_count,
    username: resp.data.username,
    link: resp.data.link,
    name:resp.data.name,
    tichxanh: resp.data.is_verified,
    cover : resp.data.cover,
    work: resp.data.work,
    hometown: resp.data.hometown,
    locale: resp.data.locale,
    location: resp.data.location,
    avtlink: `https://graph.facebook.com/${resp.data.id}/picture?width=512&height=512&access_token=2712477385668128%7Cb429aeb53369951d411e1cae8e810640`
  }
  res.json(dj)
}).catch(e =>{
  console.log(e)
})
}